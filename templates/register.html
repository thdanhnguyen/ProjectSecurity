{% extends "base.html" %}

{% block title %}ÄÄƒng KÃ½ - Secure Auth System{% endblock %}

{% block content %}
<div class="auth-page">
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1>ÄÄƒng KÃ½ TÃ i Khoáº£n</h1>
                <p>Táº¡o tÃ i khoáº£n má»›i Ä‘á»ƒ sá»­ dá»¥ng há»‡ thá»‘ng</p>
            </div>

            <form method="POST" action="{{ url_for('register') }}" class="auth-form" id="registerForm">
                <div class="form-group">
                    <label for="username">TÃªn Ä‘Äƒng nháº­p</label>
                    <input type="text" id="username" name="username" required 
                           placeholder="Nháº­p tÃªn Ä‘Äƒng nháº­p" autocomplete="username">
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required 
                           placeholder="your@email.com" autocomplete="email">
                </div>

                <div class="form-group">
                    <label for="phone">Sá»‘ Ä‘iá»‡n thoáº¡i (tÃ¹y chá»n)</label>
                    <input type="tel" id="phone" name="phone" 
                           placeholder="+84 xxx xxx xxx" autocomplete="tel">
                </div>

                <div class="form-group">
                    <label for="password">Máº­t kháº©u</label>
                    <div class="password-input">
                        <input type="password" id="password" name="password" required 
                               placeholder="Ãt nháº¥t 8 kÃ½ tá»±" autocomplete="new-password">
                        <button type="button" class="toggle-password" onclick="togglePassword('password')">
                            ğŸ‘ï¸
                        </button>
                    </div>
                    <div class="password-strength" id="passwordStrength"></div>
                </div>

                <div class="form-group">
                    <label for="confirm_password">XÃ¡c nháº­n máº­t kháº©u</label>
                    <div class="password-input">
                        <input type="password" id="confirm_password" name="confirm_password" required 
                               placeholder="Nháº­p láº¡i máº­t kháº©u" autocomplete="new-password">
                        <button type="button" class="toggle-password" onclick="togglePassword('confirm_password')">
                            ğŸ‘ï¸
                        </button>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary btn-block">
                    ÄÄƒng KÃ½
                </button>
            </form>

            <div class="auth-footer">
                <p>ÄÃ£ cÃ³ tÃ i khoáº£n? <a href="{{ url_for('login') }}">ÄÄƒng nháº­p ngay</a></p>
            </div>
        </div>

        <div class="auth-info">
            <h3>ğŸ” Báº£o Máº­t Máº­t Kháº©u</h3>
            <ul>
                <li>âœ“ Máº­t kháº©u Ä‘Æ°á»£c bÄƒm vá»›i Bcrypt</li>
                <li>âœ“ LÆ°u trá»¯ thÃªm MD5 vÃ  SHA-256</li>
                <li>âœ“ KhÃ´ng lÆ°u máº­t kháº©u dáº¡ng plain text</li>
                <li>âœ“ XÃ¡c thá»±c 2 lá»›p vá»›i OTP</li>
            </ul>
        </div>
    </div>
</div>

<script>
// Password strength checker
document.getElementById('password').addEventListener('input', function(e) {
    const password = e.target.value;
    const strengthDiv = document.getElementById('passwordStrength');
    
    if (password.length === 0) {
        strengthDiv.innerHTML = '';
        return;
    }
    
    let strength = 0;
    let feedback = [];
    
    if (password.length >= 8) strength++;
    else feedback.push('Ãt nháº¥t 8 kÃ½ tá»±');
    
    if (/[a-z]/.test(password)) strength++;
    else feedback.push('Chá»¯ thÆ°á»ng');
    
    if (/[A-Z]/.test(password)) strength++;
    else feedback.push('Chá»¯ hoa');
    
    if (/[0-9]/.test(password)) strength++;
    else feedback.push('Sá»‘');
    
    if (/[^a-zA-Z0-9]/.test(password)) strength++;
    else feedback.push('KÃ½ tá»± Ä‘áº·c biá»‡t');
    
    const levels = ['Ráº¥t yáº¿u', 'Yáº¿u', 'Trung bÃ¬nh', 'Máº¡nh', 'Ráº¥t máº¡nh'];
    const colors = ['#dc3545', '#fd7e14', '#ffc107', '#28a745', '#20c997'];
    
    strengthDiv.innerHTML = `
        <div class="strength-bar">
            <div class="strength-fill" style="width: ${strength * 20}%; background: ${colors[strength - 1] || '#dc3545'}"></div>
        </div>
        <div class="strength-text" style="color: ${colors[strength - 1] || '#dc3545'}">
            ${levels[strength - 1] || 'Ráº¥t yáº¿u'} ${feedback.length > 0 ? '- Cáº§n: ' + feedback.join(', ') : ''}
        </div>
    `;
});
</script>
{% endblock %}
